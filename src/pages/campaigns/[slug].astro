---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { campaigns } from '../../campaigns';

export async function getStaticPaths() {
  return campaigns.map((c) => ({
    params: { slug: c.id },
    props: { campaign: c },
  }));
}

const { campaign } = Astro.props;
const isAcroterra = campaign.id === 'acroterra';
const pdfSrc = '/acroterra.pdf';
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={campaign.title} description={campaign.blurb} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --bg:#0b0f1a;
        --ink:#fff;
        --edge:rgba(255,255,255,.15);
        --accent:#5b2b82;
        --accent-hover:#7d42aa;
        --glow: rgba(123, 63, 184, 0.6); /* purple glow */
      }
      html,body { height:100% }
      body {
        margin:0;
        color:var(--ink);
        font:16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
        background:#0b0f1a url('/Mountains.png') center/cover fixed no-repeat;
      }
      main { width:min(1200px,94%); margin:24px auto; }

      .hero { margin-bottom:32px; }
      .hero img {
        display:block;
        margin:0 auto;
        width:100%;
        max-width:1000px;
        height:auto;
        border-radius:16px;
        object-fit:contain;
        background-color:#000;
      }
      .title {
        margin:12px 0 6px;
        font-size:clamp(24px,3.6vw,40px);
        color:#ffffff;
        text-align:center;
      }
      .sub { opacity:.9; margin:0 0 20px; text-align:center; }

      .toolbar{
        display:flex;
        flex-wrap:wrap;
        gap:20px;
        align-items:center;
        justify-content:center;
        margin:0 auto;
        padding-top:8px;
      }
      .cta-btn{
        display:inline-flex;
        align-items:center;
        gap:8px;
        padding:16px 32px;
        font-size:1.15rem;
        font-weight:600;
        color:#fff;
        background:var(--accent);
        border:none;
        border-radius:12px;
        text-decoration:none;
        box-shadow:0 6px 16px rgba(0,0,0,0.35);
        transition: background-color .2s, transform .15s, box-shadow .2s;
      }
      .cta-btn:hover{
        background:var(--accent-hover);
        transform:translateY(-2px);
        box-shadow:
          0 0 12px var(--glow),
          0 10px 22px rgba(0,0,0,.45);
        animation: pulse-glow 1.2s ease-in-out infinite alternate; /* pulsing glow while hovered */
      }

      @keyframes pulse-glow {
        from {
          box-shadow:
            0 0 10px var(--glow),
            0 10px 22px rgba(0,0,0,.45);
        }
        to {
          box-shadow:
            0 0 22px var(--glow),
            0 12px 28px rgba(0,0,0,.5);
        }
      }
    </style>
  </head>
  <body>
    <Header />
    <main>
      <section class="hero">
        <img src={campaign.image} alt={`${campaign.title} banner`} />
        <h1 class="title">{campaign.title}</h1>
        <p class="sub">{campaign.schedule}</p>

        <div class="toolbar">
          {isAcroterra && (
            <a class="cta-btn" href={pdfSrc} download>
              ðŸŽ² Download Kevin's Guide to Acroterra PDF ðŸŽ²
            </a>
          )}
          <a class="cta-btn" href="https://play.questwithwasem.com" target="_blank" rel="noopener">
            ðŸŽ² Go to Virtual Table Top ðŸŽ²
          </a>
        </div>
      </section>

      <section>
        <p>{campaign.blurb}</p>
      </section>
    </main>
    <Footer />
  </body>
</html>
