---
import BaseHead from '../../components/BaseHead.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE } from '../../consts';
import { campaigns } from '../../campaigns';
import { IconDice } from '../../components/IconDice.jsx'; // Make sure this exists

const { id } = Astro.params;
const campaign = campaigns.find(c => c.id === id);

if (!campaign) {
  throw new Error(`Campaign not found: ${id}`);
}
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={`${campaign.title} | ${SITE_TITLE}`} />
    <style>
      :root {
        --btn-bg: #4b0082;
        --btn-text: #fff;
      }
      html, body {
        height: 100%;
        margin: 0;
        font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
        background: #0b0f1a url('/Mountains.png') center/cover no-repeat fixed;
        color: #fff;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 24px;
      }
      .pdf-viewer {
        width: 100%;
        height: 200vh;
        border: none;
        border-radius: 10px;
        overflow: hidden;
      }
      .vtt-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: var(--btn-bg);
        color: var(--btn-text);
        padding: 14px 22px;
        font-size: 1.2rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        margin: 20px 0;
        transition: background 0.2s ease;
      }
      .vtt-btn:hover {
        background: #5e0ca8;
      }
      .vtt-btn svg {
        width: 20px;
        height: 20px;
        fill: var(--btn-text);
      }
      h1 {
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <Header />

      <main class="container">
        <h1>{campaign.title}</h1>

        <!-- Go to Virtual Table Top Button -->
        <a class="vtt-btn" href="/vtt">
          <IconDice />
          Go to Virtual Table Top
          <IconDice />
        </a>

        <!-- PDF Viewer -->
        <iframe
          class="pdf-viewer"
          src={`/` + campaign.pdf}
          title={`${campaign.title} Guide`}
        ></iframe>
      </main>

      <Footer />
    </div>
  </body>
</html>
